<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Financeiro Pro - 100% Online</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
    <style>
        :root { --p: #6c5ce7; --s: #00b894; --d: #ff7675; --dark: #2d3436; --gray: #f1f2f6; }
        * { box-sizing: border-box; font-family: 'Inter', sans-serif; }
        body { background: #dfe6e9; margin: 0; padding: 10px; display: flex; justify-content: center; min-height: 100vh; }
        .app { width: 100%; max-width: 450px; background: white; border-radius: 25px; padding: 25px; box-shadow: 0 20px 50px rgba(0,0,0,0.1); align-self: center; }
        .hidden { display: none !important; }
        
        h2, h3 { color: var(--dark); text-align: center; margin-bottom: 15px; }
        input { width: 100%; padding: 14px; margin: 8px 0; border: 2px solid var(--gray); border-radius: 12px; font-size: 16px; outline: none; }
        input:focus { border-color: var(--p); }
        
        button { width: 100%; padding: 15px; border: none; border-radius: 12px; font-weight: 700; font-size: 16px; cursor: pointer; margin-top: 10px; transition: 0.3s; }
        button:active { transform: scale(0.98); }
        .btn-p { background: var(--p); color: white; }
        .btn-s { background: var(--s); color: white; }
        .btn-sair { background: #858796; color: white; margin-top: 20px; }
        .btn-del { background: var(--d); color: white; width: auto; padding: 5px 10px; font-size: 11px; margin: 0; }

        .card { background: #fff; border-radius: 15px; padding: 15px; margin-top: 15px; border: 1px solid #eee; border-left: 6px solid var(--p); }
        .linha { display: flex; justify-content: space-between; align-items: center; padding: 8px 0; border-bottom: 1px solid #f1f2f6; }
        .total-box { background: var(--dark); color: white; padding: 15px; border-radius: 12px; text-align: center; margin-top: 20px; font-size: 18px; font-weight: bold; }
        
        .pix-area { background: #f0fff4; border: 2px dashed var(--s); border-radius: 20px; padding: 20px; text-align: center; margin-top: 20px; }
        .pix-chave { display: block; background: white; padding: 10px; border-radius: 10px; margin: 10px 0; font-weight: bold; color: var(--s); border: 1px solid #ddd; }
    </style>
</head>
<body>

<div class="app">
    <div id="tela-login">
        <h2>üí∞ Financeiro Pro</h2>
        <input type="text" id="user-nome" placeholder="Seu nome (ou ADM)">
        <div id="area-senha" class="hidden">
            <input type="password" id="user-senha" placeholder="Senha ADM">
        </div>
        <button class="btn-p" onclick="entrar()">Acessar Sistema</button>
    </div>

    <div id="tela-adm" class="hidden">
        <h3>Painel Geral üõ†Ô∏è</h3>
        <div style="background: var(--gray); padding: 15px; border-radius: 15px;">
            <input type="text" id="add-nome" placeholder="Nome do Devedor">
            <input type="date" id="add-data">
            <input type="text" id="add-item" placeholder="Referente a que?">
            <input type="number" id="add-valor" placeholder="Valor (Ex: 50.00)">
            <button class="btn-s" onclick="salvar()">Salvar D√≠vida</button>
        </div>
        <div id="lista-adm"></div>
        <div id="total-adm" class="total-box"></div>
        <button class="btn-sair" onclick="voltarParaLogin()">Sair</button>
    </div>

    <div id="tela-devedor" class="hidden">
        <h3 id="boas-vindas">Ol√°!</h3>
        <div id="lista-devedor"></div>
        <div class="pix-area">
            <strong>Pagar via PIX:</strong>
            <span class="pix-chave" id="chave-pix-texto">81 98653-2061</span>
            <button class="btn-s" onclick="copiarPix()" style="padding: 10px; font-size: 14px;">Copiar Chave</button>
        </div>
        <button class="btn-sair" onclick="voltarParaLogin()">Sair</button>
    </div>
</div>

<script>
    // Configura√ß√µes
    const SENHA_ADM = "1234";
    const CHAVE_PIX_REAL = "81986532061"; // Apenas n√∫meros para facilitar o banco

    let db = JSON.parse(localStorage.getItem('financas_v7')) || {};

    function Moeda(v) { 
        return v.toLocaleString('pt-br', { style: 'currency', currency: 'BRL' }); 
    }

    // Monitora nome para mostrar senha
    document.getElementById('user-nome').oninput = function() {
        document.getElementById('area-senha').classList.toggle('hidden', this.value.toUpperCase() !== 'ADM');
    };

    function entrar() {
        let n = document.getElementById('user-nome').value.trim();
        if(!n) return alert("Por favor, digite seu nome.");

        if(n.toUpperCase() === 'ADM') {
            if(document.getElementById('user-senha').value === SENHA_ADM) {
                irPara('tela-adm'); renderAdm();
            } else { alert("Senha do administrador incorreta!"); }
        } else {
            let nf = n.charAt(0).toUpperCase() + n.slice(1).toLowerCase();
            document.getElementById('boas-vindas').innerText = "Ol√°, " + nf + " ‚ú®";
            irPara('tela-devedor'); renderDevedor(nf);
        }
    }

    function irPara(id) {
        document.getElementById('tela-login').classList.add('hidden');
        document.getElementById('tela-adm').classList.add('hidden');
        document.getElementById('tela-devedor').classList.add('hidden');
        document.getElementById(id).classList.remove('hidden');
    }

    function voltarParaLogin() {
        document.getElementById('user-nome').value = "";
        document.getElementById('user-senha').value = "";
        document.getElementById('area-senha').classList.add('hidden');
        irPara('tela-login');
    }

    function salvar() {
        let n = document.getElementById('add-nome').value.trim();
        let d = document.getElementById('add-data').value || new Date().toLocaleDateString('pt-br');
        let i = document.getElementById('add-item').value || "Geral";
        let v = parseFloat(document.getElementById('add-valor').value);

        if(!n || isNaN(v)) return alert("Preencha Nome e Valor corretamente!");

        let nomeF = n.charAt(0).toUpperCase() + n.slice(1).toLowerCase();
        if(!db[nomeF]) db[nomeF] = [];
        db[nomeF].push({ data: d, item: i, valor: v });

        localStorage.setItem('financas_v7', JSON.stringify(db));
        document.getElementById('add-nome').value = "";
        document.getElementById('add-valor').value = "";
        renderAdm();
        alert("D√≠vida adicionada para " + nomeF);
    }

    function excluir(pessoa, idx) {
        if(confirm("Deseja apagar este registro?")) {
            db[pessoa].splice(idx, 1);
            if(db[pessoa].length === 0) delete db[pessoa];
            localStorage.setItem('financas_v7', JSON.stringify(db));
            renderAdm();
        }
    }

    function renderAdm() {
        let cont = document.getElementById('lista-adm');
        cont.innerHTML = "";
        let totalGeral = 0;

        for(let p in db) {
            let card = document.createElement('div');
            card.className = 'card';
            let html = `<strong>üë§ ${p}</strong>`;
            db[p].forEach((div, idx) => {
                html += `
                <div class="linha">
                    <small>${div.data} - ${div.item}</small>
                    <div>
                        <span style="font-weight:700; margin-right:8px;">${Moeda(div.valor)}</span>
                        <button class="btn-del" onclick="excluir('${p}', ${idx})">X</button>
                    </div>
                </div>`;
                totalGeral += div.valor;
            });
            card.innerHTML = html;
            cont.appendChild(card);
        }
        document.getElementById('total-adm').innerText = "Total a Receber: " + Moeda(totalGeral);
    }

    function renderDevedor(nome) {
        let cont = document.getElementById('lista-devedor');
        cont.innerHTML = "";
        let totalPessoa = 0;

        if(db[nome]) {
            db[nome].forEach(div => {
                cont.innerHTML += `
                <div class="card">
                    <div class="linha">
                        <span>${div.data} - ${div.item}</span>
                        <span style="font-weight:700">${Moeda(div.valor)}</span>
                    </div>
                </div>`;
                totalPessoa += div.valor;
            });
            cont.innerHTML += `<div class="total-box" style="background:var(--p)">Total a Pagar: ${Moeda(totalPessoa)}</div>`;
        } else {
            cont.innerHTML = "<p style='text-align:center'>Voc√™ n√£o possui d√≠vidas! üéâ</p>";
        }
    }

    function copiarPix() {
        navigator.clipboard.writeText(CHAVE_PIX_REAL).then(() => {
            alert("Chave PIX (" + CHAVE_PIX_REAL + ") copiada! ‚úÖ");
        });
    }
</script>

</body>
</html>

